==============================
Argo 2.0 â€“ Gerenciador de Pacotes Linux
Tutorial Completo
==============================

1. VISÃƒO GERAL
-------------
Argo Ã© um gerenciador de pacotes para Linux escrito em Bash. Ele permite:
- Compilar, instalar e remover pacotes fonte
- Gerenciar dependÃªncias automaticamente
- Aplicar patches antes da instalaÃ§Ã£o
- Listar pacotes, Ã³rfÃ£os e verificar integridade via SHA256
- CLI avanÃ§ada com busca, atualizaÃ§Ã£o e simulaÃ§Ã£o (dry-run)
- AtualizaÃ§Ã£o automÃ¡tica de repositÃ³rios remotos

---

2. ESTRUTURA DE DIRETÃ“RIOS
--------------------------
$HOME/argo/
â”œâ”€â”€ argo.sh           # script principal
â”œâ”€â”€ repo/             # clones e downloads de pacotes
â”œâ”€â”€ tmp/              # diretÃ³rio temporÃ¡rio para builds
â”œâ”€â”€ var/              # dados e logs
â”‚   â”œâ”€â”€ argo.log      # log de operaÃ§Ãµes
â”‚   â”œâ”€â”€ installed.list# lista de pacotes instalados
â”‚   â”œâ”€â”€ orphan.list   # lista de pacotes Ã³rfÃ£os
â”‚   â”œâ”€â”€ versions.list # versÃµes instaladas
â”‚   â””â”€â”€ manifests/    # manifestos de arquivos instalados
â”œâ”€â”€ base/             # pacotes fonte com estrutura de build
â”‚   â””â”€â”€ <pacote>/
â”‚       â”œâ”€â”€ build     # script de build do pacote
â”‚       â”œâ”€â”€ deps.list # lista de dependÃªncias
â”‚       â”œâ”€â”€ patch/    # patches opcionais
â”‚       â””â”€â”€ hooks/    # hooks opcionais
â””â”€â”€ repos.list        # lista de repositÃ³rios remotos

---

3. ARQUIVOS NECESSÃRIOS
------------------------
1. argo.sh                     â†’ script principal
2. base/<pacote>/build         â†’ script de compilaÃ§Ã£o
3. base/<pacote>/deps.list     â†’ dependÃªncias
4. base/<pacote>/patch/        â†’ patches opcionais
5. base/<pacote>/hooks/        â†’ hooks opcionais (pre/post build/install/remove/clean)
6. var/installed.list          â†’ gerado automaticamente
7. var/orphan.list             â†’ gerado automaticamente
8. var/versions.list           â†’ gerado automaticamente
9. var/manifests/<pacote>.list â†’ gerado automaticamente
10. repos.list                 â†’ lista de repositÃ³rios remotos

---

4. REPOS.LIST
--------------
**Local:** $HOME/argo/repos.list

**Formato do arquivo:**
# Nome_do_repositorio URL Tipo
main https://meurepo.com/argo-packages.git git
tarballs https://meurepo.com/pacotes.tar.gz tar.gz

- ComentÃ¡rios comeÃ§am com `#`
- `Tipo` pode ser:
  - `git` â†’ repositÃ³rio Git
  - `tar.gz` ou `zip` â†’ arquivo compactado contendo pacotes
- Cada linha representa um repositÃ³rio que serÃ¡ atualizado pelo Argo.

**Exemplo de uso:**  
$ ./argo.sh update-db  
> Atualiza automaticamente o banco local de pacotes (`REPO_DB`) lendo todos os repositÃ³rios listados.

---

5. INSTALAÃ‡ÃƒO E CONFIGURAÃ‡ÃƒO
-----------------------------
1. Clone ou baixe o Argo:
$ git clone https://github.com/fcanata061/Argo.git

2. Navegue atÃ© o diretÃ³rio:
$ cd Argo

3. Torne o script executÃ¡vel:
$ chmod +x argo.sh

4. Crie a estrutura de diretÃ³rios se necessÃ¡rio (a primeira execuÃ§Ã£o jÃ¡ cria):
$ ./argo.sh list

5. Configure pacotes fonte em `base/<pacote>`:
- build â†’ script de compilaÃ§Ã£o
- deps.list â†’ dependÃªncias
- patch/ â†’ patches opcionais
- hooks/ â†’ hooks opcionais

---

6. COMANDOS DISPONÃVEIS
-----------------------
ğŸ”¹ Comandos bÃ¡sicos:
- build <pacote> [--version <versÃ£o]  
- install <pacote> [--destdir <dir>]  
- remove <pacote>  
- upgrade <pacote> [--version <nova>]  
- clean [<pacote>]  
- info <pacote>  
- list  
- orphan  
- hash <pacote> [--verify] [--output <arq>]  
- -h | --help | help  

ğŸ”¹ Comandos avanÃ§ados:
- search <termo>  
- check-updates  
- dry-run <operaÃ§Ã£o> <pacote>  
- update-db â†’ atualiza repositÃ³rios remotos lendo `repos.list`

---

7. FUNCIONAMENTO INTERNO
-------------------------
- Cada pacote possui um **manifesto** de arquivos instalados (`var/manifests/<pacote>.list`)  
- DependÃªncias sÃ£o resolvidas recursivamente via `resolve_dependencies`  
- Hooks permitem executar scripts antes e depois de build, install, remove e clean  
- Patches opcionais podem ser aplicados automaticamente no build  
- Logs detalhados sÃ£o armazenados em `var/argo.log`  
- AtualizaÃ§Ã£o automÃ¡tica do repositÃ³rio atualiza o banco local (`REPO_DB`) para que pacotes possam ser buscados e instalados

---

8. DICAS DE USO
---------------
- Sempre usar `build` antes de `install` se o pacote tiver cÃ³digo-fonte  
- Use `info <pacote>` para verificar versÃ£o e dependÃªncias antes de atualizar  
- Utilize `list` e `orphan` para gerenciar pacotes instalados e Ã³rfÃ£os  
- Teste `dry-run` para simular operaÃ§Ãµes arriscadas  
- Use `update-db` regularmente se vocÃª configurar repositÃ³rios remotos

---

9. EXEMPLO PRÃTICO: BUILD DO GCC
--------------------------------
1. Crie o diretÃ³rio do pacote:  
$ mkdir -p $HOME/argo/base/gcc

2. deps.list:
mpfr
gmp
mpc
isl

3. build:
#!/usr/bin/env bash
set -e
SRC_DIR="$ARGO_DIR/tmp/gcc"
BUILD_DIR="$SRC_DIR/build"
mkdir -p "$BUILD_DIR"
cd "$BUILD_DIR"
log_info "Configurando GCC"
"$SRC_DIR/configure" --prefix=/usr/local/gcc --enable-languages=c,c++ --disable-multilib
log_info "Compilando GCC"
make -j$(nproc)
log_info "GCC build concluÃ­do"

4. Hooks opcionais:
$ cat $HOME/argo/base/gcc/hooks/pre_build.sh
#!/usr/bin/env bash
log_info "Hook prÃ©-build do GCC: verificando dependÃªncias adicionais"

5. Compilando e instalando:
$ ./argo.sh build gcc
$ ./argo.sh install gcc

6. Verificando instalaÃ§Ã£o:
$ ./argo.sh info gcc
$ ./argo.sh list
$ ./argo.sh orphan
$ ./argo.sh hash gcc

---

10. OBSERVAÃ‡Ã•ES IMPORTANTES
---------------------------
- GCC Ã© um exemplo de pacote complexo; recomenda-se memÃ³ria suficiente para compilaÃ§Ã£o  
- Pacotes dependentes (mpfr, gmp, mpc, isl) devem estar configurados em `base/`  
- A estrutura do Argo permite fÃ¡cil expansÃ£o para rollback, pacotes binÃ¡rios e detecÃ§Ã£o de conflitos

---

Fim do Tutorial â€“ Argo 2.0
==============================
